<!DOCTYPE html>
<html ng-app="myApp">

<head>
    <meta charset="utf-8" />
    <title>验证-ng</title>
</head>
<script src="../lib/angular.min.js"></script>

<body ng-controller="validateCtrl as ctrl">
    <h2>Validation Example</h2>
    <form name="ctrl.myForm" novalidate>
        <p>用户名:
            <br>
            <input type="text" name="user" ng-model="user" required>
            <span style="color:red" ng-show="myForm.user.$dirty && myForm.user.$invalid">
  				<span ng-show="myForm.user.$error.required">用户名是必须的。</span>
            </span>
        </p>
        <p>邮箱:
            <br>
            <input type="email" name="email" ng-model="email" required>
            <span style="color:red" ng-show="myForm.email.$dirty && myForm.email.$invalid">
  				<span ng-show="myForm.email.$error.required">邮箱是必须的。</span>
            	<span ng-show="myForm.email.$error.email">非法的邮箱。</span>
            </span>
        </p>
        <p>
            <input type="file" name="" ng-change="setFile()" />
            <input type="submit" ng-disabled="myForm.user.$dirty && myForm.user.$invalid ||
  myForm.email.$dirty && myForm.email.$invalid" />
  			<input type="button" ng-click="clearValidate()" value="清除验证" />
            <input type="button" ng-click="setValidate()" value="设置验证" />
        </p>
    </form>
    <script>

    var app = angular.module('myApp', []);
    app.controller('validateCtrl', function($scope) {

        var self = this;

        // $scope.user = 'John Doe';
        // $scope.email = 'john.doe@gmail.com';

        $scope.clearValidate = function(){
            self.myForm.$setPristine();
            // self.myForm.$setUntouched();
            self.myForm.$invalid = true;
        }

        $scope.setValidate = function(){
             $scope.myForm = self.myForm;
        }

        $scope.setFile = function(){
            
        }
    });
    </script>
</body>

</html>
